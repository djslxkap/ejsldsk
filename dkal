-- ç½—å¸ƒä¹æ–¯å¤šåŠŸèƒ½è„šæœ¬ v2.3
-- ä½œè€…: AIåŠ©æ‰‹
-- åŠŸèƒ½: å¤šç§æ¸¸æˆåŠŸèƒ½ + å¡å¯†éªŒè¯ç³»ç»Ÿ + ä¼˜åŒ–çš„æ˜¾ç¤ºéšè—åŠŸèƒ½ + äººç‰©é€è§†

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")

-- å¡å¯†ç³»ç»Ÿé…ç½®
local LicenseSystem = {
    ValidKeys = {
        "ROBLOX2024-PREMIUM-ULTRA",
        "GAMING-SCRIPT-PRO-MAX", 
        "FREE-SCRIPT-VIP-ACCESS",
        "TEST-KEY-1234567890",
        "ADMIN-ACCESS-ROBLOX-PRO"
    },
    
    ActivatedKeys = {},
    KeyExpiry = {},
    MaxActivations = 3
}

-- é€è§†ç³»ç»Ÿ
local ESPSystem = {
    Enabled = false,
    PlayerHighlights = {},
    HealthBars = {},
    NameTags = {}
}

-- æ–°çš„UIæ˜¾ç¤º/éšè—ç³»ç»Ÿ
local UIVisibility = {
    IsVisible = true,
    ToggleKey = Enum.KeyCode.F5, -- æ”¹ä¸ºF5é”®åˆ‡æ¢æ˜¾ç¤º/éšè—
    ToggleDelay = 0.2,
    LastToggle = 0
}

-- GUI ç•Œé¢åˆ›å»º
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MultiScriptGUI_V2"
ScreenGui.Parent = game:GetService("CoreGui")

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 420, 0, 550)
MainFrame.Position = UDim2.new(0.5, -210, 0.5, -275)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- æ·»åŠ åœ†è§’æ•ˆæœ
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

-- æ ‡é¢˜æ 
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 45)
TitleBar.Position = UDim2.new(0, 0, 0, 0)
TitleBar.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
TitleBar.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 12)
TitleCorner.Parent = TitleBar

-- æ ‡é¢˜
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(0.7, 0, 1, 0)
Title.Position = UDim2.new(0.05, 0, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "ğŸ”§ğŸ”§ å¤šåŠŸèƒ½è„šæœ¬ v2.3"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 16
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

-- æ§åˆ¶æŒ‰é’®å®¹å™¨
local ControlButtons = Instance.new("Frame")
ControlButtons.Size = UDim2.new(0.4, 0, 1, 0)
ControlButtons.Position = UDim2.new(0.6, 0, 0, 0)
ControlButtons.BackgroundTransparency = 1
ControlButtons.Parent = TitleBar

-- å…³é—­æŒ‰é’®
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(0.7, 0, 0.15, 0)
CloseButton.Text = "Ã—"
CloseButton.BackgroundColor3 = Color3.fromRGB(232, 65, 56)
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 18
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Parent = ControlButtons

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 6)
CloseCorner.Parent = CloseButton

-- å¡å¯†è¾“å…¥åŒºåŸŸ
local KeySection = Instance.new("Frame")
KeySection.Size = UDim2.new(0.9, 0, 0, 80)
KeySection.Position = UDim2.new(0.05, 0, 0.1, 45)
KeySection.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
KeySection.Parent = MainFrame

local KeyCorner = Instance.new("UICorner")
KeyCorner.CornerRadius = UDim.new(0, 8)
KeyCorner.Parent = KeySection

-- å¡å¯†è¾“å…¥æ¡†
local KeyBox = Instance.new("TextBox")
KeyBox.Size = UDim2.new(0.7, 0, 0, 35)
KeyBox.Position = UDim2.new(0.05, 0, 0.2, 0)
KeyBox.PlaceholderText = "ğŸ”‘ğŸ”‘ è¯·è¾“å…¥å¡å¯†..."
KeyBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
KeyBox.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
KeyBox.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyBox.TextSize = 14
KeyBox.Font = Enum.Font.Gotham
KeyBox.Parent = KeySection

local KeyBoxCorner = Instance.new("UICorner")
KeyBoxCorner.CornerRadius = UDim.new(0, 6)
KeyBoxCorner.Parent = KeyBox

-- æ¿€æ´»æŒ‰é’®
local ActivateButton = Instance.new("TextButton")
ActivateButton.Size = UDim2.new(0.2, 0, 0, 35)
ActivateButton.Position = UDim2.new(0.77, 0, 0.2, 0)
ActivateButton.Text = "æ¿€æ´»"
ActivateButton.BackgroundColor3 = Color3.fromRGB(0, 140, 255)
ActivateButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ActivateButton.TextSize = 14
ActivateButton.Font = Enum.Font.GothamBold
ActivateButton.Parent = KeySection

local ActivateCorner = Instance.new("UICorner")
ActivateCorner.CornerRadius = UDim.new(0, 6)
ActivateCorner.Parent = ActivateButton

-- çŠ¶æ€æ˜¾ç¤º
local StatusLabel = Instance.new("TextLabel")
StatusLabel.Size = UDim2.new(0.9, 0, 0, 25)
StatusLabel.Position = UDim2.new(0.05, 0, 0.65, 0)
StatusLabel.Text = "ğŸ“ŠğŸ“Š çŠ¶æ€: æœªæ¿€æ´»"
StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
StatusLabel.BackgroundTransparency = 1
StatusLabel.TextSize = 12
StatusLabel.Font = Enum.Font.Gotham
StatusLabel.Parent = KeySection

-- åŠŸèƒ½æŒ‰é’®æ¡†æ¶
local FunctionsFrame = Instance.new("ScrollingFrame")
FunctionsFrame.Size = UDim2.new(0.9, 0, 0, 350)
FunctionsFrame.Position = UDim2.new(0.05, 0, 0.25, 45)
FunctionsFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
FunctionsFrame.ScrollBarThickness = 5
FunctionsFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 120)
FunctionsFrame.CanvasSize = UDim2.new(0, 0, 2, 0)
FunctionsFrame.Parent = MainFrame

local FunctionsCorner = Instance.new("UICorner")
FunctionsCorner.CornerRadius = UDim.new(0, 8)
FunctionsCorner.Parent = FunctionsFrame

-- åŠŸèƒ½æŒ‰é’®åˆ›å»ºå‡½æ•°
local function CreateFunctionButton(name, description, position, callback)
    local ButtonFrame = Instance.new("Frame")
    ButtonFrame.Size = UDim2.new(0.95, 0, 0, 70)
    ButtonFrame.Position = position
    ButtonFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
    ButtonFrame.Parent = FunctionsFrame
    
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.CornerRadius = UDim.new(0, 6)
    ButtonCorner.Parent = ButtonFrame
    
    local Button = Instance.new("TextButton")
    Button.Size = UDim2.new(0.9, 0, 0, 40)
    Button.Position = UDim2.new(0.05, 0, 0.1, 0)
    Button.Text = name
    Button.BackgroundColor3 = Color3.fromRGB(0, 140, 255)
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.TextSize = 14
    Button.Font = Enum.Font.GothamBold
    Button.Parent = ButtonFrame
    
    local ButtonBtnCorner = Instance.new("UICorner")
    ButtonBtnCorner.CornerRadius = UDim.new(0, 6)
    ButtonBtnCorner.Parent = Button
    
    local DescLabel = Instance.new("TextLabel")
    DescLabel.Size = UDim2.new(0.9, 0, 0, 20)
    DescLabel.Position = UDim2.new(0.05, 0, 0.7, 0)
    DescLabel.Text = description
    DescLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    DescLabel.BackgroundTransparency = 1
    DescLabel.TextSize = 11
    DescLabel.Font = Enum.Font.Gotham
    DescLabel.Parent = ButtonFrame
    
    -- æŒ‰é’®æ‚¬åœæ•ˆæœ
    Button.MouseEnter:Connect(function()
        TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(30, 170, 255)}):Play()
    end)
    
    Button.MouseLeave:Connect(function()
        TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 140, 255)}):Play()
    end)
    
    Button.MouseButton1Click:Connect(callback)
    
    return ButtonFrame
end

-- åˆ›å»ºåŠŸèƒ½æŒ‰é’®
local buttons = {
    {"ğŸ”ğŸ” äººç‰©é€è§†", "æ˜¾ç¤ºç©å®¶æ¨¡å‹å’Œè¡€é‡ç¢°æ’ä½“", UDim2.new(0.025, 0, 0, 10)},
    {"âš¡âš¡ é€Ÿåº¦æå‡", "å¢åŠ è§’è‰²ç§»åŠ¨é€Ÿåº¦", UDim2.new(0.025, 0, 0, 90)},
    {"ğŸ›¡ï¸ğŸ›¡ï¸ æ— æ•Œæ¨¡å¼", "å…ç–«ä¼¤å®³", UDim2.new(0.025, 0, 0, 170)},
    {"ğŸ”«ğŸ”« æ— é™å¼¹è¯", "æ— é™æ­¦å™¨å¼¹è¯", UDim2.new(0.025, 0, 0, 250)},
    {"ğŸ’°ğŸ’° è´§å¸ä¿®æ”¹", "ä¿®æ”¹æ¸¸æˆè´§å¸", UDim2.new(0.025, 0, 0, 330)},
    {"ğŸ¯ğŸ¯ è‡ªåŠ¨ç„å‡†", "è‡ªåŠ¨ç„å‡†æ•Œäºº", UDim2.new(0.025, 0, 0, 410)},
    {"ğŸš€ğŸš€ é£è¡Œæ¨¡å¼", "å¯ç”¨é£è¡ŒåŠŸèƒ½", UDim2.new(0.025, 0, 0, 490)},
    {"ğŸŒ™ğŸŒ™ å¤œè§†æ¨¡å¼", "å¢å¼ºå¤œé—´è§†é‡", UDim2.new(0.025, 0, 0, 570)}
}

for i, buttonData in ipairs(buttons) do
    CreateFunctionButton(buttonData[1], buttonData[2], buttonData[3], function()
        if i == 1 then -- äººç‰©é€è§†æŒ‰é’®
            ToggleESP()
        else
            -- å…¶ä»–åŠŸèƒ½æŒ‰é’®çš„å¤„ç†
            print("åŠŸèƒ½å¼€å‘ä¸­: " .. buttonData[1])
        end
    end)
end

-- æ–°çš„UIæ˜¾ç¤º/éšè—åŠŸèƒ½
local function ToggleUI()
    local currentTime = tick()
    if currentTime - UIVisibility.LastToggle < UIVisibility.ToggleDelay then
        return
    end
    
    UIVisibility.LastToggle = currentTime
    UIVisibility.IsVisible = not UIVisibility.IsVisible
    
    if UIVisibility.IsVisible then
        MainFrame.Visible = true
        TweenService:Create(MainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 420, 0, 550)}):Play()
    else
        TweenService:Create(MainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 0, 0, 0)}):Play()
        delay(0.3, function()
            MainFrame.Visible = false
        end)
    end
end

-- äººç‰©é€è§†ç³»ç»Ÿ
local function CreateESP(player)
    if ESPSystem.PlayerHighlights[player] then
        return
    end
    
    local highlight = Instance.new("Highlight")
    highlight.FillColor = Color3.fromRGB(255, 50, 50)
    highlight.FillTransparency = 0.3
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.OutlineTransparency = 0
    highlight.Parent = player.Character
    
    -- è¡€é‡æ˜¾ç¤º
    local billboard = Instance.new("BillboardGui")
    billboard.Size = UDim2.new(0, 200, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.AlwaysOnTop = true
    billboard.Parent = player.Character
    
    local healthLabel = Instance.new("TextLabel")
    healthLabel.Size = UDim2.new(1, 0, 1, 0)
    healthLabel.BackgroundTransparency = 1
    healthLabel.Text = player.Name .. "\nHP: 100"
    healthLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    healthLabel.TextSize = 14
    healthLabel.Font = Enum.Font.GothamBold
    healthLabel.Parent = billboard
    
    -- ç¢°æ’ä½“æ˜¾ç¤º
    local boundingBox = Instance.new("Part")
    boundingBox.Size = Vector3.new(4, 6, 2)
    boundingBox.Transparency = 0.7
    boundingBox.Material = Enum.Material.Neon
    boundingBox.BrickColor = BrickColor.new("Bright red")
    boundingBox.Anchored = true
    boundingBox.CanCollide = false
    boundingBox.Parent = player.Character
    
    ESPSystem.PlayerHighlights[player] = highlight
    ESPSystem.HealthBars[player] = {billboard = billboard, label = healthLabel}
    ESPSystem.BoundingBoxes[player] = boundingBox
    
    -- æ›´æ–°è¡€é‡
    local function UpdateHealth()
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            local humanoid = player.Character.Humanoid
            healthLabel.Text = player.Name .. "\nHP: " .. math.floor(humanoid.Health)
            
            -- æ›´æ–°ç¢°æ’ä½“ä½ç½®
            if boundingBox and player.Character:FindFirstChild("HumanoidRootPart") then
                boundingBox.Position = player.Character.HumanoidRootPart.Position
            end
        end
    end
    
    -- ç›‘å¬è¡€é‡å˜åŒ–
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.HealthChanged:Connect(UpdateHealth)
    end
    
    player.CharacterAdded:Connect(function(character)
        wait(1) -- ç­‰å¾…è§’è‰²åŠ è½½å®Œæˆ
        if highlight then highlight:Destroy() end
        if billboard then billboard:Destroy() end
        if boundingBox then boundingBox:Destroy() end
        
        CreateESP(player)
    end)
end

local function RemoveESP(player)
    if ESPSystem.PlayerHighlights[player] then
        ESPSystem.PlayerHighlights[player]:Destroy()
        ESPSystem.PlayerHighlights[player] = nil
    end
    
    if ESPSystem.HealthBars[player] then
        ESPSystem.HealthBars[player].billboard:Destroy()
        ESPSystem.HealthBars[player] = nil
    end
    
    if ESPSystem.BoundingBoxes[player] then
        ESPSystem.BoundingBoxes[player]:Destroy()
        ESPSystem.BoundingBoxes[player] = nil
    end
end

local function ToggleESP()
    ESPSystem.Enabled = not ESPSystem.Enabled
    
    if ESPSystem.Enabled then
        -- ä¸ºæ‰€æœ‰ç©å®¶åˆ›å»ºESP
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= Players.LocalPlayer then
                CreateESP(player)
            end
        end
        
        -- ç›‘å¬æ–°ç©å®¶åŠ å…¥
        Players.PlayerAdded:Connect(function(player)
            CreateESP(player)
        end)
        
        print("ğŸ”ğŸ” äººç‰©é€è§†å·²å¯ç”¨")
    else
        -- ç§»é™¤æ‰€æœ‰ESP
        for player, _ in pairs(ESPSystem.PlayerHighlights) do
            RemoveESP(player)
        end
        
        print("ğŸ”ğŸ” äººç‰©é€è§†å·²ç¦ç”¨")
    end
end

-- é”®ç›˜å¿«æ·é”®
UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    
    if input.KeyCode == UIVisibility.ToggleKey then
        ToggleUI()
    end
end)

-- å…³é—­æŒ‰é’®äº‹ä»¶
CloseButton.MouseButton1Click:Connect(function()
    TweenService:Create(MainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 0, 0, 0)}):Play()
    delay(0.3, function()
        ScreenGui:Destroy()
    end)
end)

-- æ¿€æ´»æŒ‰é’®äº‹ä»¶
ActivateButton.MouseButton1Click:Connect(function()
    local key = KeyBox.Text
    if table.find(LicenseSystem.ValidKeys, key) then
        StatusLabel.Text = "ğŸ“ŠğŸ“Š çŠ¶æ€: å·²æ¿€æ´» âœ“"
        StatusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        print("âœ…âœ… å¡å¯†éªŒè¯æˆåŠŸ!")
    else
        StatusLabel.Text = "ğŸ“ŠğŸ“Š çŠ¶æ€: å¡å¯†æ— æ•ˆ âœ—"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        print("âŒâŒ å¡å¯†éªŒè¯å¤±è´¥!")
    end
end)

-- å¯åŠ¨åŠ¨ç”»
MainFrame.Size = UDim2.new(0, 0, 0, 0)
MainFrame.Visible = true
TweenService:Create(MainFrame, TweenInfo.new(0.5), {Size = UDim2.new(0, 420, 0, 550)}):Play()

print("ğŸ®ğŸ® å¤šåŠŸèƒ½è„šæœ¬ v2.3 å·²åŠ è½½!")
print("=== æ–°åŠŸèƒ½ ===")
print("ğŸ–¥ï¸ğŸ–¥ï¸ UIæ§åˆ¶: F5é”®åˆ‡æ¢æ˜¾ç¤º/éšè—")
print("ğŸ”ğŸ” äººç‰©é€è§†: æ˜¾ç¤ºç©å®¶æ¨¡å‹ã€è¡€é‡å’Œç¢°æ’ä½“")
print("ğŸ’¡ğŸ’¡ æç¤º: æŒ‰F5å¯å¿«é€Ÿéšè—/æ˜¾ç¤ºç•Œé¢")
